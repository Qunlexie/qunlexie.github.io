<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ML System Interview - Notes</title>
    <link rel="stylesheet" href="../assets/style.css?v=1759444768" />
    <style>
      /* Additional styles for notes page - always visible */
      .notes-content {
        display: block !important;
      }
      
      /* aman.ai inspired styles */
      .notes-header {
        text-align: center;
        margin: 2rem 0;
      }
      
      .notes-header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }
      
      .notes-header .subtitle {
        color: #666;
        font-style: italic;
      }
      
      .category-section {
        background: white;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .category-section h2 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #007bff;
      }
      
      .back-link {
        display: inline-block;
        margin-bottom: 1rem;
        color: #007bff;
        text-decoration: none;
        font-weight: 500;
      }
      
      .back-link:hover {
        text-decoration: underline;
      }
      
      /* Table of Contents Styles - aman.ai inspired */
      .table-of-contents {
        margin-bottom: 2rem;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
      
      .toc-list {
        list-style: none;
        padding: 0;
        margin: 0;
        font-size: 0.95rem;
        line-height: 1.6;
      }
      
      .toc-list li {
        margin-bottom: 0.3rem;
        position: relative;
      }
      
      .toc-list a {
        color: #007bff;
        text-decoration: none;
        display: block;
        padding: 0.1rem 0;
        transition: color 0.2s ease;
      }
      
      .toc-list a:hover {
        color: #0056b3;
        text-decoration: underline;
      }
      
      .question {
        margin-top: 2rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #e9ecef;
      }
      
      /* Back to Top Button */
      .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        transition: all 0.3s ease;
        opacity: 0;
        visibility: hidden;
        z-index: 1000;
      }
      
      .back-to-top:hover {
        background: #0056b3;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0,123,255,0.4);
      }
      
      .back-to-top.visible {
        opacity: 1;
        visibility: visible;
      }
      
      .back-to-top .icon {
        display: inline-block;
        transform: rotate(-90deg);
      }
      
      /* References section styling */
      .references-section {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.5rem;
        margin-top: 2rem;
      }
      
      .references-section h3 {
        margin-top: 0;
        margin-bottom: 1rem;
        color: #495057;
        font-size: 1.2rem;
      }
      
      .references-list {
        margin: 0;
        padding-left: 1.5rem;
      }
      
      .references-list li {
        margin-bottom: 0.5rem;
        line-height: 1.5;
      }
      
      .references-list a {
        color: #007bff;
        text-decoration: none;
        font-weight: 500;
      }
      
      .references-list a:hover {
        text-decoration: underline;
      }
      
      @media (max-width: 768px) {
        .notes-header h1 {
          font-size: 2rem;
        }
        .table-of-contents {
          padding: 1rem;
        }
        .back-to-top {
          bottom: 20px;
          right: 20px;
          width: 45px;
          height: 45px;
          font-size: 16px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Notes Content -->
    <div class="notes-content" id="notesContent">
      <header>
        <nav>
          <ul>
            <li><a href="../pages/index.html">Home</a></li>
            <li><a href="../pages/projects.html">Projects and Research</a></li>
            <li><a href="../pages/highlights.html">Highlights</a></li>
            <li><a href="../pages/notes.html">Notes Hub</a></li>
          </ul>
        </nav>
      </header>
      
      <main>
        <div class="notes-header">
          <h1>ML System Interview</h1>
          <p class="subtitle">comprehensive revision notes</p>
        </div>

        <div class="category-section">
          <a href="../pages/notes.html" class="back-link">← Back to Notes Hub</a>
          <h2>ML System Interview</h2>
          <div style="line-height: 1.8;">
            <div class="table-of-contents">
              <ul class="toc-list">
                <li><a href="#q-feed-ranking--personalized-rec">* Feed Ranking / Personalized Recommendation Systems</a></li>
                <li><a href="#q-ads-recommendation-systems">* Ads Recommendation Systems</a></li>
                <li><a href="#q-other-considerations">* Other Considerations</a></li>
              </ul>
            </div>

            <p id="q-feed-ranking--personalized-rec" class="question"><strong>Feed Ranking / Personalized Recommendation Systems</strong></p>
            <ul style="margin-left: 1.5rem;">
              <li>Business Metrics</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Maximize:</li>
                  <li>Watch Time: encourage longer consumption, measured across different duration buckets.</li>
                  <li>Completion Rate: e.g., proportion of users completing ≥70% of an item.</li>
                  <li>Engagement: likes, shares, saves, follows, profile views.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Minimize:</li>
                  <li>Safeguards: churn rate, drop in app opens, shorter session duration.</li>
                  <li>Disengagement Signals: not interested, block, report, high scroll velocity.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Data and Labels</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Outputs:</li>
                  <li>Probability of watch time > k seconds (bucketed outcomes).</li>
                  <li>Probability of completion.</li>
                  <li>Probability of engagement (like, share, follow, save) or a weighted composite engagement metric.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Inputs:</li>
                  <li>User Profile: demographics, app usage history, community affiliations, location/places history.</li>
                  <li>User-Content Interaction: recent history of watched, liked, shared, or skipped content.</li>
                  <li>Content Attributes: creator profile, topic tags, captions, text/audio/image/video features.</li>
                  <li>Graph Features: follower-followee links, creator interaction graph, PageRank, clustering coefficients.</li>
                  <li>Contextual Information: device type, time of day, session-level activity.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Scale and Latency:</li>
                  <li>Hundreds of millions of daily active users.</li>
                  <li>Millions of new content items daily.</li>
                  <li>Target latency: ≤ 100 ms per request.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>System Architecture</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Hybrid Batch + Real-Time:</li>
                  <li>Batch Layer: compute embeddings for all users and content daily.</li>
                  <li>Real-Time Layer: session-enriched embeddings updated continuously for active users.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>System Flow:</li>
                  <li>Candidate Generation: Embedding-based retrieval with high recall, ANN search engines (e.g., FAISS, ScaNN) for fast retrieval over 100M+ items.</li>
                  <li>Ranking: Deep personalized models combining user, content, graph, and context features, Multitask prediction of engagement, completion, and watch time.</li>
                  <li>Post-Processing: Re-ranking for freshness, diversity, recency, Content safety and policy filtering.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Data & Feature Engineering</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Feature Types:</li>
                  <li>User: demographics, usage history, places visited.</li>
                  <li>Content/Creator: creator metadata, tags, captions, embeddings from multimodal encoders.</li>
                  <li>Interaction: likes, shares, favorites, profile views.</li>
                  <li>Graph: shared followers, community detection, PageRank, clustering coefficient.</li>
                  <li>Context: time of day, device, session features.</li>
                  <li>Cross Features: pairwise interactions such as (user age × content category).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Handling Missing Data:</li>
                  <li>Mean/median imputation.</li>
                  <li>Predictive imputation where feasible.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Feature Representation:</li>
                  <li>Numerical → normalization, bucketing.</li>
                  <li>Categorical → embeddings for user IDs, content IDs, creator IDs.</li>
                  <li>Text → embeddings from pretrained transformers (DistilBERT, word2vec).</li>
                  <li>Video/Image → encoders such as CLIP or ViT.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Labels:</li>
                  <li>Watch completion (binary).</li>
                  <li>Engagement events (like, share, save).</li>
                  <li>Watch time buckets.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Sampling & Splitting:</li>
                  <li>Negative sampling: time-based or exposed-but-skipped items.</li>
                  <li>Stratified sampling to preserve diversity.</li>
                  <li>Time-based splits for train/val/test (e.g., 10 months / 1 month / 1 month).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Bias Challenges:</li>
                  <li>Imbalanced Classes: oversample positives, use SMOTE, or apply hard negative mining.</li>
                  <li>Positional Bias: model position explicitly or apply position-aware learning.</li>
                  <li>Exposure Bias: apply inverse propensity weighting (IPW).</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Modeling & Training</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Candidate Generation:</li>
                  <li>Two-Tower Model: user tower + content tower.</li>
                  <li>Contrastive learning (InfoNCE loss).</li>
                  <li>Embedding indexing with FAISS/ScaNN.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Ranking:</li>
                  <li>Multitask MLP predicting multiple objectives.</li>
                  <li>Input: fused embeddings from user, content, graph, context.</li>
                  <li>Post-ranking logic: promote diversity, surface long-tail content, enforce safety.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Loss Functions:</li>
                  <li>Binary Cross Entropy.</li>
                  <li>Normalized Cross Entropy.</li>
                  <li>Calibration loss for probability alignment.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Evaluation & Deployment</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Offline Metrics:</li>
                  <li>Retrieval: NCE loss.</li>
                  <li>Ranking: nDCG@k, Recall@k, MAP.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Online Metrics:</li>
                  <li>Watch completion rate.</li>
                  <li>Engagement/session.</li>
                  <li>Average daily watch time per user.</li>
                  <li>Aggregate metrics such as DAU × average watch time.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Deployment Strategies:</li>
                  <li>Shadow launches.</li>
                  <li>A/B testing with progressive rollout.</li>
                  <li>Bandit frameworks for exploration of unseen creators/content.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Monitoring & Continuous Learning:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Real-time ingestion of engagement signals.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Daily refresh of embeddings for active users and trending content.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Periodic retraining to capture evolving user interests.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Monitor drift across content types and modalities.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Infrastructure:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Feature Store: ensure offline/online consistency.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Model Store: decouple retrieval and ranking models.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Serving: containerized inference (K8s), FAISS/ScaNN for retrieval, memory store (e.g., Redis) for graph embeddings.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Monitoring: dashboards for latency, skips, engagement anomalies.</li>
                </ul>
            <p id="q-ads-recommendation-systems" class="question"><strong>Ads Recommendation Systems</strong></p>
                  </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Business Metrics:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Maximize: CTR, engagement (likes, shares), conversion events (install, purchase, sign-up).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Minimize: negative feedback such as "not interested" or report rates.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Safeguards: avoid churn and fatigue from repetitive ads.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Data and Labels:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Outputs:</li>
                  <li>Probability of click, conversion, engagement (like/share).</li>
                  <li>Probability of negative feedback.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Inputs:</li>
                  <li>User: demographics, app usage, ad/content history.</li>
                  <li>Ad: creative type, format, targeting attributes, historical CTR.</li>
                  <li>Context: session time, device type, network status.</li>
                  <li>Graph: user-user similarity, ad-ad co-engagement patterns, interest groups.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Scale & Latency:</li>
                  <li>Tens of millions of ads daily.</li>
                  <li>Latency: ≤ 100 ms.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>System Flow:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Candidate Generation: retrieve ad candidates using embedding-based retrieval.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Filtering: enforce pacing, frequency caps, eligibility, and campaign rules.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Ranking: DeepFM or similar ranking models combining wide + deep features.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Post-Processing: enforce freshness, diversity, and revenue optimization.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Data & Feature Engineering:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>User features: demographics, device type, activity history.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Ad features: ad ID, creative type, format, historical CTR.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Interaction features: recency/frequency of ad engagement.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Contextual features: session time, app usage streaks, scroll depth.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Graph features: co-view embeddings, interest communities.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Feature representation: embeddings for categorical IDs, transformers for text, vision encoders for images.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Cross features: interaction between user and ad attributes.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Modeling & Training:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Candidate Generation:</li>
                  <li>Two-tower retrieval (user tower + ad tower).</li>
                  <li>Contrastive or triplet loss training.</li>
                  <li>ANN indexing for large-scale retrieval.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Ranking:</li>
                  <li>DeepFM: captures both low-order (linear) and high-order (nonlinear) feature interactions.</li>
                  <li>Multi-task predictions: click, conversion, engagement, negative feedback.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Loss Functions:</li>
                  <li>Binary Cross Entropy per action.</li>
                  <li>Multi-task weighted loss balancing engagement vs safety.</li>
                  <li>Calibration loss for probability correctness.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Re-ranking:</li>
                  <li>Score re-weighting based on revenue or business rules.</li>
                  <li>Diversity-aware adjustments.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Evaluation & Deployment:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Offline Metrics:</li>
                  <li>Ranking: nDCG@k, MAP.</li>
                  <li>Retrieval: NCE loss.</li>
                  <li>Calibration: Brier score, Expected Calibration Error (ECE).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Online Metrics:</li>
                  <li>CTR, conversion rate, ROAS.</li>
                  <li>Report and not-interested rate.</li>
                  <li>Churn and retention impacts.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Deployment Strategies:</li>
                  <li>Shadow testing (prediction logging).</li>
                  <li>A/B testing.</li>
                  <li>Contextual bandits for exploration/exploitation trade-offs.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Monitoring & Continuous Learning:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Training cadence:</li>
                  <li>Daily → embedding refresh and ad index update.</li>
                  <li>Weekly → retrain ranking models.</li>
                  <li>Monthly → graph/community updates.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Feedback loop: negative sampling, bias correction.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Drift detection: monitor CTR, conversion, and engagement trends across cohorts.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Infrastructure:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Feature store for online/offline consistency.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Model store with versioning.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>ANN indexes for ad retrieval.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Scalable inference frameworks (TF Serving, TorchServe, vLLM).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Monitoring dashboards with latency, CTR, and anomaly detection.</li>
                </ul>
            <p id="q-other-considerations" class="question"><strong>Other Considerations</strong></p>
                  </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Bias Mitigation:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Position Bias:</li>
                  <li>Randomization techniques (interleaving, shuffling).</li>
                  <li>Inverse Propensity Weighting (IPW).</li>
                  <li>Click models (examination hypothesis, cascade models).</li>
                  <li>Position-aware learning (use position features but neutralize at inference).</li>
                  <li>Regularization against overfitting to position.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Selection Bias:</li>
                  <li>Diversified data collection.</li>
                  <li>Stratified sampling.</li>
                  <li>Oversampling or synthetic augmentation of underrepresented groups.</li>
                  <li>Reweighting samples inversely to selection probability.</li>
                  <li>Fairness-aware objectives and adversarial debiasing.</li>
                  <li>Continuous fairness monitoring (demographic parity, equal opportunity, disparate impact).</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>Evaluation Metrics:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Ranking Quality: nDCG@k, Recall@k, MAP.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Calibration: Brier score, Expected Calibration Error (ECE).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Engagement Metrics: CTR and conversion rates adjusted for exposure bias.</li>
                  </ul>
                </ul>
            <ul style="margin-left: 1.5rem;">
              <li>A/B Testing: Challenges and Best Practices:</li>
                <ul style="margin-left: 1.5rem;">
                  <li>Dilution:</li>
                  <li>Occurs when the treatment group includes users not actually exposed to or affected by the change.</li>
                  <li>Dilution reduces observed treatment effects, making it harder to detect real improvements.</li>
                  <li>Solution: tightly define eligibility criteria for users in test groups.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Selection Bias:</li>
                  <li>If users are not randomly assigned to groups, outcomes may reflect underlying differences rather than treatment effects.</li>
                  <li>Example: if more active users are over-represented in treatment, results inflate.</li>
                  <li>Solution: random or stratified random sampling.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Temporal Effects:</li>
                  <li>Time-based factors (e.g., weekends, holidays, seasonality) may distort results.</li>
                  <li>Solution: run experiments across multiple time periods to smooth temporal fluctuations.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Cross-Interference (Spillover):</li>
                  <li>When control and treatment users influence each other's outcomes.</li>
                  <li>Example: social graph or recommendation algorithms where one group's exposure indirectly affects another.</li>
                  <li>Solution: ensure groups are isolated and independent.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Statistical Power:</li>
                  <li>Without adequate sample size, true effects may not be detectable.</li>
                  <li>Solution: compute required sample size in advance, considering expected effect size, variance, and confidence levels.</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Overemphasis on Short-Term Metrics:</li>
                  <li>A/B tests often optimize for short-term metrics (e.g., CTR), which may not align with long-term success.</li>
                  <li>Solution: run experiments for sufficient time, include long-term metrics (LTV, retention, churn).</li>
                    </ul>
                <ul style="margin-left: 1.5rem;">
                  <li>Human Error and Confirmation Bias:</li>
                  <li>Analysts may consciously or unconsciously bias interpretation if they know group assignments.</li>
                  <li>Solution: blind analysis—conduct evaluation without revealing which group is control vs treatment.</li>
                    </ul>
                </ul>
          </div>
        </div>

      </main>
      
      <footer>
        <p>&copy; 2025 ML System Interview Notes</p>
      </footer>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()" title="Back to Table of Contents">
      <span class="icon">→</span>
    </button>

    <script>
      // Notes are now freely accessible - no authentication required
      function checkAuth() {
        // Always show content - knowledge is free!
        document.getElementById('notesContent').style.display = 'block';
      }

      // Scroll to top functionality
      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }

      // Show/hide back to top button based on scroll position
      function toggleBackToTopButton() {
        const backToTopButton = document.getElementById('backToTop');
        if (window.pageYOffset > 300) {
          backToTopButton.classList.add('visible');
        } else {
          backToTopButton.classList.remove('visible');
        }
      }

      // Initialize page
      document.addEventListener('DOMContentLoaded', function() {
        checkAuth();
        
        // Add scroll event listener for back to top button
        window.addEventListener('scroll', toggleBackToTopButton);
      });
    </script>
  </body>
</html>